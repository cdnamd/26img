(()=>{const DEFAULT_NAME="Your Name";const COUNTDOWN_TARGET=new Date("Dec 25, 2025 00:00:00").getTime();const ICONS=["s1.png","s2.png","s3.png","s4.png","s5.png","s6.png","s7.png","s8.png","s9.png","s10.png"];const body=document.body;const isIndex=!!(body&&body.classList.contains("page-index"));const isWish=!!(body&&body.classList.contains("page-wish"));const byId=id=>document.getElementById(id);function getRawNameFromUrl(){const params=new URLSearchParams(window.location.search);const raw=params.get("n");return raw==null||raw===""?DEFAULT_NAME:raw}function sanitizeName(raw){let s=String(raw).replace(/\+/g," ");s=s.replace(/[-@%<>#]/g," ");s=s.replace(/&(lt|gt|quot|amp);|&#0*39;/gi," ");s=s.replace(/\s+/g," ").trim();return s||DEFAULT_NAME}function createSafeWrapPattern(){try{return new RegExp("^[a-zA-Z0-9 ~`!$^*()_\\-+=\\/?\\.,;:\\[\\]{}|Ã©Ã¨ÃªÃ«Ã Ã¢Ã¤Ã®Ã¯Ã´Ã¶Ã¹Ã»Ã¼Ã§Å“Ã¦Ã¿Ã‰ÃˆÃŠÃ‹Ã€Ã‚Ã„ÃÃÃ”Ã–Ã™Ã›ÃœÃ‡Å’Ã†Ã¡Ã­Ã³ÃºÃÃÃ“ÃšÃ±Ã‘Â¿Â¡Â°ÂªÂºÃ§Ã‡Ã Ã¨Ã¬Ã²Ã¹Ã¢ÃªÃ®Ã´Ã»Ã£Ãµâ‚¬Â£Â¥â‚©â‚ªÂ¢Ï€âˆ‘âˆâˆšâˆ«â‰ˆ<>=â‰¤â‰¥Â±Ã·Â©Â®â„¢Â°â€¢Â§\\p{So}]+$","u")}catch{return/^[a-zA-Z0-9 ~`!$^*()_\-+=\/?.,;:\[\]{}|Ã©Ã¨ÃªÃ«Ã Ã¢Ã¤Ã®Ã¯Ã´Ã¶Ã¹Ã»Ã¼Ã§Å“Ã¦Ã¿Ã‰ÃˆÃŠÃ‹Ã€Ã‚Ã„ÃÃÃ”Ã–Ã™Ã›ÃœÃ‡Å’Ã†Ã¡Ã­Ã³ÃºÃÃÃ“ÃšÃ±Ã‘Â¿Â¡Â°ÂªÂºÃ§Ã‡Ã Ã¨Ã¬Ã²Ã¹Ã¢ÃªÃ®Ã´Ã»Ã£Ãµâ‚¬Â£Â¥â‚©â‚ªÂ¢Ï€âˆ‘âˆâˆšâˆ«â‰ˆ<>=â‰¤â‰¥Â±Ã·Â©Â®â„¢Â°â€¢Â§]+$/}}const SAFE_WRAP_PATTERN=createSafeWrapPattern();function graphemesOf(text){if(typeof Intl!=="undefined"&&Intl.Segmenter){const seg=new Intl.Segmenter(undefined,{granularity:"grapheme"});return Array.from(seg.segment(text),x=>x.segment)}return Array.from(text)}function isEmojiGrapheme(grapheme){try{const re=new RegExp("\\p{Extended_Pictographic}","u");return re.test(grapheme)}catch{const cp=grapheme&&grapheme.codePointAt?grapheme.codePointAt(0):0;if(!cp)return false;return cp>=127744&&cp<=129791||cp>=9728&&cp<=10175||cp>=127462&&cp<=127487}}function buildEmojiBgRemoveFragment(text){const root=document.createDocumentFragment();let free=document.createElement("span");free.className="emoji-free";root.appendChild(free);for(const g of graphemesOf(text)){if(isEmojiGrapheme(g)){const emoji=document.createElement("span");emoji.className="emoji";emoji.textContent=g;root.appendChild(emoji);free=document.createElement("span");free.className="emoji-free";root.appendChild(free)}else{free.appendChild(document.createTextNode(g))}}return root}function renderSplitSpans(text){const outer=document.createElement("div");outer.className="test";const inner=document.createElement("div");inner.className="name";for(const ch of text){const span=document.createElement("span");span.textContent=ch;inner.appendChild(span)}outer.appendChild(inner);return outer}function renderName(displayName){const mount=byId("nameMount");const nameSmall=byId("nameSmall");if(mount){mount.textContent="";if(SAFE_WRAP_PATTERN.test(displayName)){mount.appendChild(renderSplitSpans(displayName))}else{const sname=document.createElement("div");sname.className="sname";sname.appendChild(buildEmojiBgRemoveFragment(displayName));mount.appendChild(sname)}}if(nameSmall){nameSmall.textContent="";nameSmall.appendChild(buildEmojiBgRemoveFragment(displayName))}document.title=`${displayName} wishing you Happy Christmas`}function slugForUrl(displayName){return displayName.replace(/[ +\-]+/g,"-").replace(/[?#&=%]/g,"").replace(/-+/g,"-").replace(/^-+|-+$/g,"")||"Your-Name"}function setShareLinks(displayName){const wa=byId("shareWhatsapp");const second=byId("shareSecond");if(!wa&&!second)return;const slug=slugForUrl(displayName);const base=new URL(".",window.location.href);const shareUrl=`${base.href}?n=${slug}`;const wpMessage=`ğŸ¤—ğŸ˜‡ Have you seen this??\n*${displayName}* sent you a surprise message \nğŸ’ Open This ğŸ‘‡ğŸ‘‡\n${shareUrl}`;const isMobile=/android|iphone|ipad|ipod|mobile|tablet/i.test(navigator.userAgent||"");if(wa){wa.href=isMobile?`whatsapp://send?text=${encodeURIComponent(wpMessage)}`:`https://api.whatsapp.com/send?text=${encodeURIComponent(wpMessage)}`;wa.target=isMobile?"":"_blank";wa.rel="noopener"}const secondIcon=byId("shareSecondIcon");if(second){if(isMobile){second.setAttribute("data-os","Messenger");if(secondIcon)secondIcon.src="https://fastly.jsdelivr.net/gh/cdnamd/26img/main/msg.png";second.href=`fb-messenger://share/?link=${encodeURIComponent(shareUrl)}&t=fm`;second.target=""}else{second.setAttribute("data-os","Facebook");if(secondIcon)secondIcon.src="https://fastly.jsdelivr.net/gh/cdnamd/26img/main/fb.png";second.href=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(shareUrl)}&t=fa`;second.target="_blank"}second.rel="noopener"}}function initCurtainAudio(){const curtainToggle=byId("curtainToggle");if(!curtainToggle)return;curtainToggle.addEventListener("change",()=>{if(!curtainToggle.checked)return;const audio=byId("audiocracker");if(!audio||typeof audio.play!=="function")return;try{audio.currentTime=0}catch{}audio.play()["catch"](()=>{})})}function initScrollColumns(){function buildColumn(targetId){const container=byId(targetId);if(!container)return;for(let i=0;i<2;i++){ICONS.forEach(src=>{const img=document.createElement("img");img.src=`https://fastly.jsdelivr.net/gh/cdnamd/26img/main/${src}`;img.width=25;img.height=25;container.appendChild(img)})}}buildColumn("m1-list");buildColumn("m2-list")}function initCountdown(){const demo=byId("demo");if(!demo)return;const curtainToggle=byId("curtainToggle");let timerId=null;let lastHtml=null;function tick(){const distance=COUNTDOWN_TARGET-Date.now();if(distance<0){demo.innerHTML="";if(timerId){clearInterval(timerId);timerId=null}return}const d=Math.floor(distance/(1e3*60*60*24));const h=Math.floor(distance%(1e3*60*60*24)/(1e3*60*60));const m=Math.floor(distance%(1e3*60*60)/(1e3*60));const s=Math.floor(distance%(1e3*60)/1e3);const html=`${d}<font color='#FA069A'> days,</font> ${h}<font color='#11680B'> hrs,</font> ${m}<font color='#9B274C'> min,<br></font> ${s}<font color='#F47810'> sec before</font> `;if(html!==lastHtml){demo.innerHTML=html;lastHtml=html}}function start(){if(timerId)return;tick();timerId=setInterval(tick,1e3)}function stop(){if(!timerId)return;clearInterval(timerId);timerId=null}function updateRunningState(){const curtainOpenOk=!isIndex||!curtainToggle||curtainToggle&&curtainToggle.checked;const shouldRun=!document.hidden&&curtainOpenOk;if(shouldRun)start();else stop()}document.addEventListener("visibilitychange",updateRunningState);if(curtainToggle)curtainToggle.addEventListener("change",updateRunningState);updateRunningState()}const display=sanitizeName(getRawNameFromUrl());renderName(display);if(isWish)setShareLinks(display);if(isIndex){if(window.location.search&&window.history&&typeof window.history.replaceState==="function"){window.history.replaceState({},document.title,window.location.pathname)}}initCurtainAudio();initCountdown();initScrollColumns()})();